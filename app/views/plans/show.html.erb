<%= render 'devise/shared/navbar'%>
<div class="container" >
<p>
  <strong>Monthly Fee:</strong>
  <%= @plan.monthly_fee %>
</p>
<p>
  <strong>Name:</strong>
  <%= @plan.name %>
</p>

<p>
<strong>Present Features</strong>
    <% @plan.features.each do |feature| %>
      <tr>
        <td><%= feature.name %></td>
        <td><%= feature.code %></td>
        <td><%= feature.unit_price %></td>
        <td><%= feature.max_unit_limit %></td>
        <td><%= link_to button_tag('Edit feature', class: 'btn btn-dark float-left'),edit_plan_feature_path(@plan,feature) %></td>
        <td><%= button_to [@plan,feature], method: :delete, data: { confirm: 'Are you sure you want to delete this feature?' },
                                 class: 'btn btn-danger' do %>
                Delete
            <% end %></td>

      </tr>
      <br>
<%end%>
</p>


<%# <%= link_to 'Destroy', @feature, method: :delete, data: { confirm: 'Are you sure?' } %> %>
<% if policy(Plan).edit?%>
<%= link_to button_tag('Edit plan', class: 'btn btn-dark float-left' ),edit_plan_path(@plan) %>
<% end %>


<% if policy(@plan).subscribe_plan?%>
  <% if !params[:id].presence || current_user.id%>
    <%= link_to button_tag('Subscribe', class: 'btn btn-dark float-left'),subscribe_plan_path(@plan) %>
  <%end %>
<%end %>
<% if policy(@plan).unsubscribe_plan? %>
  <%= link_to button_tag('Unsubscribe', class: 'btn btn-dark float-left'),unsubscribe_plan_path(@plan) %>
<%end%>
<%= link_to button_tag('Back', class: 'btn btn-dark float-left'),plans_path %>
</div>
<p id="notice"><%= notice %></p>

<p>
  <%# <strong>Name:</strong> %>
  <%# <%= @plan.features%>
</p>

<p>
  <%# <strong>Code:</strong> %>
  <%# <%= @plan.features.code %>
</p>

<p>
  <%# <strong>Unit price:</strong> %>
  <%# <%= @plan.features.unit_price %>
</p>

<p>
  <%# <strong>Max unit limit:</strong> %>
  <%# <%= @plan.features.max_unit_limit %>
</p>

